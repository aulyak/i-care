{"version":3,"file":"/js/dashboard.js","mappings":"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","sources":["webpack:///./resources/js/dashboard.js"],"sourcesContent":["const dt = luxon.DateTime;\n\nfunction groupByWitel(arr) {\n  const result = [...arr.reduce((r, o) => {\n    const key = o.WITEL;\n\n    const item = r.get(key) || Object.assign({}, o, {\n      TOTAL_LIS: 0,\n    });\n\n    item.TOTAL_LIS += parseFloat(o.TOTAL_LIS);\n\n    return r.set(key, item);\n  }, new Map()).values()];\n\n  return result;\n}\n\n$(document).ready(async function() {\n  setInterval(() => {\n    const now = dt.now();\n    const currentDtReadable = now.toLocaleString({weekday: 'long', month: 'long', day: '2-digit', year: 'numeric'});\n    const localTime = now.toFormat('HH:mm');\n    $('.date').text(currentDtReadable);\n    $('.time').text(localTime);\n  }, 1000);\n\n  const $topNav = $('#topnav-logo');\n  const $li = $topNav.find('a');\n  const imgSrc = $li.data('src');\n\n  const $img = $(`<img src=\"${imgSrc}\" style=\"height: 2.5rem; width: fit-content;\">`);\n  $topNav.append($img);\n  $li.remove();\n\n  const filteredProporsi = $('#summary').data('filtered-summary');\n  const filteredProfileLoss = $('#summary').data('filtered-profile-loss');\n  const filteredAlert = $('#summary').data('filtered-profile-loss');\n  const dataTotal = $('#summary').data('total');\n\n  console.log({filteredProporsi, filteredProfileLoss, filteredAlert});\n\n  const filteredProporsiFlat = filteredProporsi ? Object.values(filteredProporsi) : '';\n  const filteredProfileLossFlat = filteredProfileLoss ? Object.values(filteredProfileLoss) : '';\n  const filteredAlertFlat = filteredAlert ? Object.values(filteredAlert) : '';\n  console.log({filteredProporsiFlat, filteredProfileLossFlat, filteredAlertFlat});\n  const groupedSummary = groupByWitel(filteredProporsiFlat);\n  console.log({groupedSummary});\n  const groupedLoss = groupByWitel(filteredProfileLossFlat);\n  const groupedAlert = groupByWitel(filteredAlertFlat);\n  const sumTotalLis = groupedSummary.reduce((adder, item) => adder + item.TOTAL_LIS, 0);\n  const groupedPercentage = groupedSummary.map(item => ({...item, percentage: item.TOTAL_LIS / sumTotalLis * 100}));\n\n  const canvasSummary = document.getElementById('summary');\n  const ctxSummary = canvasSummary.getContext('2d');\n  const canvasProporsi = document.getElementById('proporsi');\n  const ctxProporsi = canvasProporsi.getContext('2d');\n\n  const labelsSummary = Object.keys(dataTotal);\n  const dataSummaryRaw = Object.values(dataTotal);\n\n  const dataSetSummary = [];\n  for (let i = 0; i < labelsSummary.length; i++) {\n    dataSetSummary.push({x: labelsSummary[i], y: dataSummaryRaw[i]});\n  }\n\n  const dataSummary = {\n    datasets: [{\n      data: dataSetSummary,\n      backgroundColor: Object.keys(dataTotal).map(item => '#' + (Math.random() * 0xFFFFFF << 0).toString(16).padStart(6, '0'))\n    }]\n  };\n\n  console.log({groupedPercentage});\n\n  const dataProporsi = {\n    labels: groupedSummary.map(item => item.WITEL),\n    datasets: [{\n      label: 'Total LIS',\n      data: groupedPercentage.map(item => item.percentage.toFixed(2)),\n      backgroundColor: groupedSummary.map(item => '#' + (Math.random() * 0xFFFFFF << 0).toString(16).padStart(6, '0'))\n    }]\n  };\n\n  console.log({dataProporsi});\n\n  const areaChartData = {\n    labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],\n    datasets: [\n      {\n        label: 'Loss',\n        backgroundColor: 'rgba(60,141,188,0.9)',\n        borderColor: 'rgba(60,141,188,0.8)',\n        pointRadius: false,\n        pointColor: '#3b8bba',\n        pointStrokeColor: 'rgba(60,141,188,1)',\n        pointHighlightFill: '#fff',\n        pointHighlightStroke: 'rgba(60,141,188,1)',\n        data: [28, 48, 40, 19, 86, 27, 90]\n      },\n      {\n        label: 'Sales',\n        backgroundColor: 'rgba(210, 214, 222, 1)',\n        borderColor: 'rgba(210, 214, 222, 1)',\n        pointRadius: false,\n        pointColor: 'rgba(210, 214, 222, 1)',\n        pointStrokeColor: '#c1c7d1',\n        pointHighlightFill: '#fff',\n        pointHighlightStroke: 'rgba(220,220,220,1)',\n        data: [65, 59, 80, 81, 56, 55, 40]\n      },\n    ]\n  };\n\n  const areaChartOptions = {\n    maintainAspectRatio: false,\n    responsive: true,\n    legend: {\n      display: true\n    },\n  };\n\n  const lineChartCanvas = $('#tren').get(0).getContext('2d');\n  const lineChartOptions = $.extend(true, {}, areaChartOptions);\n  const lineChartData = $.extend(true, {}, areaChartData);\n  lineChartData.datasets[0].fill = false;\n  lineChartData.datasets[1].fill = false;\n  lineChartOptions.datasetFill = false;\n\n  const lineChart = new Chart(lineChartCanvas, {\n    type: 'line',\n    data: lineChartData,\n    options: lineChartOptions\n  });\n\n  const summaryChart = new Chart(ctxSummary, {\n    type: 'bar',\n    data: dataSummary,\n    options: {\n      responsive: true,\n      scales: {\n        y: {\n          beginAtZero: true,\n        }\n      },\n      plugins: {\n        legend: {\n          position: 'top',\n          display: false,\n        },\n        title: {\n          display: true,\n          text: 'Summary LIS, Sales & Churn'\n        }\n      }\n    },\n  });\n\n  const proporsiChart = new Chart(ctxProporsi, {\n    type: 'pie',\n    data: dataProporsi,\n    options: {\n      responsive: true,\n      plugins: {\n        tooltip: {\n          callbacks: {\n            label: function(context) {\n              return context.raw + ' %';\n            }\n          }\n        },\n        legend: {\n          position: 'top',\n        },\n        title: {\n          display: true,\n          text: 'Proporsi LIS'\n        }\n      }\n    },\n  });\n\n});"],"names":["dt","luxon","DateTime","groupByWitel","arr","reduce","r","o","key","WITEL","item","get","Object","assign","TOTAL_LIS","parseFloat","set","Map","values","$","document","ready","setInterval","now","currentDtReadable","toLocaleString","weekday","month","day","year","localTime","toFormat","text","$topNav","$li","find","imgSrc","data","$img","append","remove","filteredProporsi","filteredProfileLoss","filteredAlert","dataTotal","console","log","filteredProporsiFlat","filteredProfileLossFlat","filteredAlertFlat","groupedSummary","sumTotalLis","adder","groupedPercentage","map","percentage","canvasSummary","getElementById","ctxSummary","getContext","canvasProporsi","ctxProporsi","labelsSummary","keys","dataSummaryRaw","dataSetSummary","i","length","push","x","y","dataSummary","datasets","backgroundColor","Math","random","toString","padStart","dataProporsi","labels","label","toFixed","areaChartData","borderColor","pointRadius","pointColor","pointStrokeColor","pointHighlightFill","pointHighlightStroke","areaChartOptions","maintainAspectRatio","responsive","legend","display","lineChartCanvas","lineChartOptions","extend","lineChartData","fill","datasetFill","Chart","type","options","scales","beginAtZero","plugins","position","title","tooltip","callbacks","context","raw"],"sourceRoot":""}